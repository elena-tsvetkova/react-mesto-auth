{"version":3,"sources":["images/Vector.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/auth.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","hooks/useFormWithValidation.js","components/Login.js","components/Register.js","components/InfoTooltip.js","images/success.png","images/fail.png","components/App.js","index.js"],"names":["Header","props","onSignOut","userEmail","loggedIn","path","useLocation","pathname","useState","isActive","className","src","logo","alt","onClick","to","Footer","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","handleCardDelete","handleCardLike","avatar","about","map","PopupWithForm","isOpen","title","popupClass","formClass","buttonCloseClass","buttonSubmitClass","buttonSubmitText","onClose","children","onSubmit","useEffect","handleEscapeClose","event","key","document","addEventListener","removeEventListener","e","target","currentTarget","noValidate","disabled","ImagePopup","BASE_URL","responseCheck","response","ok","json","Promise","reject","status","api","options","this","_url","baseUrl","_headers","headers","res","text","then","Error","fetch","method","_checkResponse","userData","body","JSON","stringify","data","id","all","getInitialCards","getUserInfo","authorization","EditProfilePopup","onUpdateUser","setName","description","setDescription","preventDefault","tabIndex","required","minLength","maxLength","placeholder","value","onChange","evt","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","reset","ref","AddPlacePopup","setLink","ProtectedRoute","isChecking","exact","useFormWithValidation","React","values","setValues","errors","setErrors","isValid","setIsValid","isValidInputs","setIsValidInputs","resetFrom","useCallback","newValues","newErrors","newIsValid","newIsValidInputs","handleChange","input","validationMessage","closest","checkValidity","Login","onLogin","catch","err","console","log","message","email","password","Register","onRegister","confirmation","InfoTooltip","isSuccess","image","App","history","useHistory","initialData","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","isAuthChecking","setIsAuthChecking","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setIsSuccess","setData","closeAllPopups","getAllNeededData","tokenCheck","token","jwt","localStorage","getItem","push","finally","Provider","removeItem","useCardId","deleteCard","state","filter","item","dislike","newCard","c","like","auth","statusCode","setItem","setUserInfoApi","addCard","updateAvatar","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8b726d01.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Vector.03b78ada.svg\";","import React, { useState } from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport logo from '../images/Vector.svg';\n\nconst Header = (props) => {\n  const {\n    onSignOut,\n    userEmail,\n    loggedIn\n  } = props\n\n  const path = useLocation().pathname\n\n  const [isActive, setIsActive] = useState(false);\n\n    return (\n      <header className=\"header\">\n      <img className=\"header__logo\" src={logo} alt=\"Место Россия\"/>\n        {loggedIn ? (<> <nav className={`header__menu ${isActive ? \"active\" : \"\"}`}>\n            <ul className=\"header__list\">\n              <li>\n                <p className=\"header__email\">{userEmail}</p>\n              </li>\n              <li>\n                {path === \"/mesto\"}\n                <button\n                  className=\"header__button header__button_type_exit\"\n                  onClick={onSignOut}>\n                  Выйти\n              </button>\n              </li>\n            </ul>\n          </nav></>)\n        : (<Link\n          className=\"header__button\"\n          to={path === \"/sign-in\" ? \"/sign-up\" : \"/sign-in\"}>\n          {path === \"/sign-in\" ? \"Регистрация\" : \"Вход\"}\n        </Link>)}\n      </header>\n    );\n}\n\nexport default Header;\n","import React from 'react';\n\nfunction Footer () {\n    return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\"> &copy; 2022 Mesto Russia</p>\n    </footer>     \n    );\n}\n\nexport default Footer;\n\n","import { createContext } from 'react';\n\nexport const CurrentUserContext = createContext();\n","import {useContext} from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n    const {\n        card,\n        onCardClick,\n        onCardLike,\n        onCardDelete\n    } = props\n\n    const currentUser = useContext(CurrentUserContext);\n    const isOwn = card.owner._id === currentUser._id;\n    const cardDeleteButtonClassName = `element__trash ${isOwn ? '' : 'element__trash_hidden'}`;\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    const cardLikeButtonClassName = `element__like ${isLiked ? 'element__like-activ' : ''}`;\n\n    const handleClick = () => onCardClick(props);\n    const handleLikeClick = () => onCardLike(card);\n    const handleDeleteClick = () => onCardDelete(card);\n\n    return (\n        <article className=\"element\">\n            <img src={card.link} alt={card.name} className=\"element__image\" onClick={handleClick}/>\n            <div className=\"element__header\">\n                <h2 className=\"element__title\">{card.name}</h2>\n                <div className=\"element__count\">\n                    <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\n                    <span className=\"element__like-count\">{card.likes.length}</span>\n                </div>\n            </div>\n            <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\n        </article>\n    );\n}\n\nexport default Card;\n","import {useContext} from 'react';\nimport Card from './Card';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\n\nfunction Main(props) {\n    const {\n        onEditProfile,\n        onAddPlace,\n        onEditAvatar,\n        onCardClick,\n        cards,\n        onCardDelete,\n        onCardLike\n    } = props\n\n    const currentUser = useContext(CurrentUserContext);\n\n    const openEditProfilePopup = () => onEditProfile()\n    const openAddPlacePopup = () => onAddPlace()\n    const openEditAvatarPopup = () => onEditAvatar()\n    const handleCardDelete = (card) => onCardDelete(card._id)\n    const handleCardLike = (card) => onCardLike(card)\n\n    return (\n        <main className=\"main\">\n            <section className=\"profile\">\n                <div className=\"profile__grid\">\n                    <div className=\"profile__avatarNew\">\n                        <img className=\"profile__avatar\" alt=\"фото профиля\" src={`${currentUser.avatar}`}/>\n                        <button className=\"profile__avatar-button\" type=\"button\" onClick={openEditAvatarPopup}\n                                aria-label=\"Изменить_аватар\"></button>\n                    </div>\n                    <h1 className=\"profile__name\">{currentUser.name}</h1>\n                    <button type=\"button\" className=\"profile__button-edit\" onClick={openEditProfilePopup}></button>\n                    <p className=\"profile__status\">{currentUser.about}</p>\n                </div>\n                <button type=\"button\" className=\"profile__add-button\" onClick={openAddPlacePopup}></button>\n            </section>\n            <section className=\"elements\">\n                {\n                    cards.map((card) => (\n                        <Card key={card._id} card={card} onCardClick={onCardClick} onCardLike={handleCardLike}\n                              onCardDelete={handleCardDelete}/>\n                    ))\n                }\n            </section>\n        </main>\n    );\n}\n\nexport default Main;","import {useEffect} from 'react';\n\nfunction PopupWithForm(props) {\n    const {\n        isOpen,\n        name,\n        title,\n        popupClass,\n        formClass,\n        buttonCloseClass,\n        buttonSubmitClass,\n        buttonSubmitText,\n        onClose,\n        children,\n        onSubmit\n    } = props\n\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleEscapeClose = (event) => {\n            if (event.key === \"Escape\") {\n                onClose();\n            }\n        };\n        document.addEventListener(\"keydown\", handleEscapeClose);\n        return () => {\n            document.removeEventListener(\"keydown\", handleEscapeClose);\n        };\n    }, [isOpen, onClose]);\n\n    const handleOverlayClose = (e) => {\n        if (e.target === e.currentTarget && isOpen) {\n            onClose();\n        }\n    };\n\n    return (\n        <section onClick={handleOverlayClose} className={`popup ${isOpen ? 'popup_opened' : ''} popup-${name}`}>\n            <div className={`popup__container ${popupClass}`}>\n                <button type=\"button\" className={`popup__close popup__${buttonCloseClass}`} onClick={onClose}></button>\n                <h2 className=\"popup__title\">{title}</h2>\n                <form className={`popup__form form ${formClass}`} noValidate name={`popup-${name}`} onSubmit={onSubmit}>\n                    {children}\n                    <button type=\"submit\" disabled={false}\n                            className={`popup__button ${buttonSubmitClass} form__submit`}>{buttonSubmitText}</button>\n                </form>\n            </div>\n        </section>\n    );\n}\n\nexport default PopupWithForm;","import {useEffect} from 'react';\n\nfunction ImagePopup(props) {\n    const {\n        card,\n        onClose\n    } = props\n\n    useEffect(() => {\n        const handleEscapeClose = (event) => {\n            if (event.key === \"Escape\") {\n                onClose();\n            }\n        };\n        document.addEventListener(\"keydown\", handleEscapeClose);\n        return () => {\n            document.removeEventListener(\"keydown\", handleEscapeClose);\n        };\n    }, [onClose]);\n\n    const handleOverlayClose = (event) => {\n        if (event.target === event.currentTarget) {\n            onClose();\n        }\n    };\n    const name = card.card ? card.card.name : ''\n    const link = card.card ? card.card.link : ''\n    return (\n        <div onClick={handleOverlayClose} className={`popup ${card.isOpen ? 'popup_opened' : ''} popup-big-image`}>\n            <div className='popup-big-image__container'>\n                <img src={link} className=\"popup-big-image__opened\" alt={name}/>\n                <h2 className=\"popup-big-image__title\">{name}</h2>\n                <button type=\"button\" className=\"popup__close popup-big-image__close\" onClick={onClose}></button>\n            </div>\n        </div>\n    );\n}\n\nexport default ImagePopup;\n\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst responseCheck = (response) => response.ok ? response.json() : Promise.reject(`Ошибка ${response.status}`);\n\nexport const register = ({password, email}) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"password\": password,\n            \"email\": email\n        })\n    })\n        .then(responseCheck)\n};\n\nexport const authorize = ({password, email}) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"password\": password,\n            \"email\": email\n        })\n    })\n        .then(responseCheck)\n};\n\nexport const getContent = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`\n        }\n    })\n        .then(responseCheck)\n}"," class Api {\n  constructor(options) {\n    this._url = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json()\n    }\n    return Promise.reject(`Ошибка: ${res.status} ${res.text().then(text => { throw new Error(text) })}`)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  setUserInfoApi(userData) { \n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: userData.name,\n        about: userData.about\n      })\n    })\n    .then(this._checkResponse)\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: 'GET',\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  addCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n    .then(this._checkResponse)\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._url}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  like(id) {\n    return fetch(`${this._url}/cards/likes/${id}`, {\n      method: 'PUT',\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  dislike(id) {\n    return fetch(`${this._url}/cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  updateAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      })\n    })\n    .then(this._checkResponse)\n  }\n\n\n  getAllNeededData() {\n    return Promise.all([\n      this.getInitialCards(),\n       this.getUserInfo(),\n      ])\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-42',\n  headers: {\n    authorization: '62c163bf-1af7-42e5-bc58-fbc19f858504',\n    'Content-Type': 'application/json'\n  }\n}); \n\nexport default api;","import {useContext, useEffect, useState} from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\n\nfunction EditProfilePopup(props) {\n    const {\n        isOpen,\n        onClose,\n        onUpdateUser\n    } = props\n\n    const [name, setName] = useState('Жак');\n    const [description, setDescription] = useState('test');\n\n    const currentUser = useContext(CurrentUserContext);\n\n    useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n    }, [currentUser]);\n\n    function handleChangeName(evt) {\n        setName(evt.target.value);\n    }\n\n    function handleChangeDescription(evt) {\n        setDescription(evt.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        onUpdateUser({\n            name,\n            about: description,\n        });\n    }\n\n    return (\n        <PopupWithForm name='profile' title='Редактировать профиль' popupClass='popup__common'\n                       formClass='popup__form-profile' buttonCloseClass='close-profile' buttonSubmitClass=''\n                       buttonSubmitText='Сохранить' isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n            <input id=\"name-input\" type=\"text\" tabIndex=\"1\" required minLength=\"2\" maxLength=\"40\"\n                   className=\"popup__input popup__input_type_name form__input\" placeholder=\"Имя\"\n                   name=\"name\" value={name} onChange={handleChangeName}/>\n            <span className=\"form__input-error name-input-error\"></span>\n            <input id=\"status-input\" type=\"text\" tabIndex=\"2\" required minLength=\"2\" maxLength=\"200\"\n                   className=\"popup__input popup__input_type_job form__input\" placeholder=\"Профессия\"\n                   name=\"status\" value={description} onChange={handleChangeDescription}/>\n            <span className=\"form__input-error status-input-error\"></span>\n        </PopupWithForm>\n    );\n}\n\nexport default EditProfilePopup;","import {useEffect, useRef} from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nfunction EditAvatarPopup(props) {\n    const {\n        isOpen,\n        onClose,\n        onUpdateAvatar\n    } = props\n\n    const avatarRef = useRef('');\n\n    useEffect(() => {\n        avatarRef.current = ''\n    }, [isOpen]);\n\n    function handleChange(evt) {\n        avatarRef.current = evt.target.value;\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateAvatar({\n            avatar: avatarRef.current,\n        });\n        e.target.reset()\n    }\n\n    return (\n        <PopupWithForm name='editAvatar' title='Обновить аватар' popupClass='popup-editAvatar__nev'\n                       buttonCloseClass='close-add' buttonSubmitClass='popup-editAvatar__button'\n                       buttonSubmitText='Сохранить' isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n            <input id=\"avatar-input\" type=\"url\" tabIndex=\"1\" required\n                   className=\"popup__input popup__input_type_link form__input\"\n                   placeholder=\"Ссылка на картинку\" name=\"link\" ref={avatarRef} onChange={handleChange}/>\n            <span className=\"form__input-error avatar-input-error\"></span>\n        </PopupWithForm>\n    );\n}\n\nexport default EditAvatarPopup;\n","import {useState, useEffect} from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nfunction AddPlacePopup(props) {\n    const {\n        isOpen,\n        onClose,\n        onAddPlace\n    } = props\n\n    const [name, setName] = useState('');\n    const [link, setLink] = useState('');\n\n    function handleChangeName(evt) {\n        setName(evt.target.value);\n    }\n\n    function handleChangeLink(evt) {\n        setLink(evt.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onAddPlace({\n            name,\n            link\n        });\n    }\n\n    useEffect(() => {\n        setName('');\n        setLink('');\n    }, [isOpen]);\n\n    return (\n        <PopupWithForm name='new-image' title='Новое место' formClass='popup__form-new-image'\n                       buttonCloseClass='close-add' buttonSubmitClass='' buttonSubmitText='Создать'\n                       isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n            <input id=\"title-input\" type=\"text\" tabIndex=\"1\" required minLength=\"2\" maxLength=\"20\"\n                   className=\"popup__input popup__input_type_title form__input\"\n                   placeholder=\"Название\" name=\"name\" value={name} onChange={handleChangeName}/>\n            <span className=\"form__input-error title-input-error\"></span>\n            <input id=\"link-input\" type=\"url\" tabIndex=\"2\" required\n                   className=\"popup__input popup__input_type_link form__input\"\n                   placeholder=\"Ссылка на картинку\" name=\"link\" value={link} onChange={handleChangeLink}/>\n            <span className=\"form__input-error link-input-error\"></span>\n        </PopupWithForm>\n    );\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ path, loggedIn, isChecking, children }) => {\n  return (\n    <Route path={path} exact>\n      { isChecking ? (\n        <main className={\"content page__content\"}></main>\n      ) : (\n        loggedIn ? children : <Redirect to=\"./sign-in\" />\n      )}\n    </Route>\n  )\n}\n\nexport default ProtectedRoute;","// Пользовательский Хук для сбора информации инпутов, и валидации формы\nimport React, { useCallback } from \"react\";\n\nexport const useFormWithValidation = () => {\n  const [values, setValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(false);\n\n  const [isValidInputs, setIsValidInputs] = React.useState({});\n\n  const handleChange = (evt) => {\n    const input = evt.target;\n    const value = input.value;\n    const name = input.name;\n    setValues({ ...values, [name]: value });\n    setErrors({ ...errors, [name]: input.validationMessage });\n    setIsValid(input.closest(\"form\").checkValidity());\n\n    setIsValidInputs({ ...isValidInputs, [name]: input.checkValidity() });\n  };\n\n  const resetFrom = useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false, newIsValidInputs = {}) => {\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n      setIsValidInputs(newIsValidInputs);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return { values, handleChange, resetFrom, errors, isValid, isValidInputs };\n}","import React from 'react';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst Login = ({ onLogin }) => {\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onLogin(values)\n      .then(resetFrom())\n      .catch(err => {\n        console.log(err.message || 'Что то пошло не так')\n      })\n  }\nreturn (\n  <main className=\"main login\">\n    <div className=\"login__container\">\n      <h2 className=\"login__title\">Вход</h2>\n      <form\n        className=\"login__form\"\n        name=\"form\"\n        id=\"form-with-login\"\n        onSubmit={handleSubmit}>\n        <input\n          className={`login__input login__input_type_email\n      ${isValidInputs.email\n              ? 'login__input_state_valid'\n              : ''\n            }`}\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          id=\"login-input-email\"\n          maxLength=\"100\"\n          value={values.email || ''}\n          onChange={handleChange}\n          required\n        />\n        <span\n          id=\"login-input-email-error\"\n          className=\"login__error\">\n          {errors.email || \"\"}\n        </span>\n\n        <input\n          className={`login__input login__input_type_password\n      ${isValidInputs.password\n              ? 'login__input_state_valid'\n              : ''\n            }`}\n          type=\"password\"\n          placeholder=\"Пароль\"\n          name=\"password\"\n          id=\"login-input-password\"\n          maxLength=\"50\"\n          value={values.password || \"\"}\n          onChange={handleChange}\n          required\n        />\n        <span\n          id=\"login-input-password-error\"\n          className=\"login__error\">\n          {errors.password || \"\"}\n        </span>\n\n        <button\n          className={`button__submit  \n          ${!isValid\n              ? 'login__button-submit_invalid'\n              : ''\n            }`}\n          type=\"submit\">\n          Войти\n        </button>\n      </form>\n    </div>\n  </main>\n);\n}\n\nexport default Login;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useFormWithValidation } from \"../hooks/useFormWithValidation\";\n\nconst Register = ({ onRegister }) => {\n\n  const {\n    values,\n    handleChange,\n    resetFrom,\n    errors,\n    isValid,\n    isValidInputs\n  } = useFormWithValidation();\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (values.password !== values.confirmation) {\n\n      resetFrom({\n        email: values.email,\n      }, {\n        password: 'Пароли не совпадают',\n        confirmation: 'Пароли не совпадают'\n      }, false, {\n        email: true,\n      })\n      return;\n    }\n\n    onRegister(values)\n      .then(resetFrom())\n      .catch(err => {\n        console.log(err.message || 'Что то пошло не так')\n      })\n  }\n\n  return (\n    <main className=\"main register\">\n      <div className=\"register__container\">\n        <h2 className=\"register__title\">Регистрация</h2>\n        <form\n          className=\"register__form\"\n          name=\"form\"\n          id=\"form-with-register\"\n          onSubmit={handleSubmit}>\n\n          <input\n            className={`register__input register__input_type_email\n        ${isValidInputs.email\n                ? 'register__input_state_valid'\n                : ''\n              }`}\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            id=\"register-input-email\"\n            minLength=\"2\"\n            maxLength=\"100\"\n            value={values.email || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"register-input-email-error\"\n            className=\"register__error\">\n            {errors.email || \"\"}\n          </span>\n\n          <input\n            className={`register__input register__input_type_password\n        ${isValidInputs.password\n                ? 'register__input_state_valid'\n                : ''\n              }`}\n            type=\"password\"\n            placeholder=\"Пароль\"\n            name=\"password\"\n            id=\"register-input-password\"\n            minLength=\"6\"\n            maxLength=\"50\"\n            value={values.password || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"register-input-password-error\"\n            className=\"register__error\">\n            {errors.password || \"\"}\n          </span>\n\n          <input\n            className={`register__input register__input_type_confirm-password\n        ${isValidInputs.confirmation\n                ? 'register__input_state_valid'\n                : ''\n              }`}\n            type=\"password\"\n            placeholder=\"Подтвердите пароль\"\n            name=\"confirmation\"\n            id=\"register-input-confirm-password\"\n            minLength=\"2\"\n            maxLength=\"50\"\n            value={values.confirmation || \"\"}\n            onChange={handleChange}\n            required\n          />\n          <span\n            id=\"register-input-confirm-password-error\"\n            className=\"register__error\">\n            {errors.confirmation || \"\"}\n          </span>\n\n          <button\n            className={`button__submit register__button-submit \n            ${!isValid\n                ? 'register__button-submit_invalid'\n                : ''\n              }`}\n            type=\"submit\">\n            Зарегистрироваться\n          </button>\n        </form>\n        <div className=\"register__signin\">\n          <p>Уже зарегистрированы? <Link to=\"/sign-in\" className=\"register__login-link\">Войти</Link></p>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nexport default Register;","import React, { useEffect } from 'react';\nimport fail from '../images/fail.png';\nimport success from '../images/success.png';\nimport { useLocation } from 'react-router-dom';\n\nconst InfoTooltip = (props) => {\n  // Диструктуризированная переменная с пропсами\n  const {\n    isOpen,\n    onClose,\n    isSuccess\n  } = props;\n\n  const path = useLocation().pathname\n\n  const tooltip = () => {\n    if (path === '/sign-in' || path === '/sign-up') {\n      return isSuccess\n        ? \"Вы успешно зарегистрировались!\"\n        : \"Что-то пошло не так! Попробуйте ещё раз.\";\n    }\n\n    if (path === '/mesto') {\n      return isSuccess\n        ? \"Вы успешно авторизовались!\"\n        : \"Что-то пошло не так!\";\n    }\n\n    return;\n  }\n\n  const image = isSuccess\n    ? success\n    : fail\n\n  // Реализация закрытия нажатием на ESC\n  useEffect(() => {\n    if (!isOpen) return;\n    const handleEscapeClose = (event) => {\n      if (event.key === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscapeClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapeClose);\n    };\n  }, [isOpen, onClose]);\n\n  // Реализация закрытия по оверлею\n  const handleOverlayClose = (e) => {\n    if (e.target === e.currentTarget && isOpen) {\n      onClose();\n    }\n    return;\n  };\n\n\n  return (\n    <section\n      onClick={handleOverlayClose}\n      className={`popup ${isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button\n          className=\"popup__close\"\n          type=\"button\"\n          onClick={onClose}>\n          </button>\n        <img className=\"popup__image\" src={image} alt={\"Картинка подсказки\"}></img>\n        <p className=\"popup__title popup__title-tooltip\">{tooltip()}</p>\n      </div>\n    </section>\n  )\n}\n\nexport default InfoTooltip;","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React, {useState, useEffect, useCallback} from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Header from './Header.js';\nimport Footer from './Footer.js';\nimport Main from './Main.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport * as auth from '../utils/auth';\nimport api from \"../utils/api\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\n\n\nfunction App() {\n    const history = useHistory();\n    const initialData = {\n        email: ''\n    }\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState({isOpen: false});\n    const [currentUser, setCurrentUser] = useState({'name': 'Жак', 'about': 'test', 'avatar': 'http://ya.ru'});\n    const [cards, setCards] = useState([]);\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [isAuthChecking, setIsAuthChecking] = useState(true);\n    const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\n    const [isSuccess, setIsSuccess] = useState(false);\n    const [data, setData] = useState(initialData);\n\n\n    const closePopup = () => {\n        setIsInfoTooltipPopupOpen(false)\n    }\n\n    useEffect(() => {\n        api.getAllNeededData()\n            .then(([cards, userData]) => {\n                setCurrentUser(userData)\n                setCards(cards)\n            })\n            .catch((err) => console.log(err))\n    }, []);\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true)\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true)\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true)\n    }\n\n    function handleCardClick(data) {\n        setSelectedCard({isOpen: true, ...data})\n    }\n\n    function closeAllPopups() {\n        setIsEditProfilePopupOpen(false)\n        setIsAddPlacePopupOpen(false)\n        setIsEditAvatarPopupOpen(false)\n        setSelectedCard({isOpen: false})\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        if (isLiked) {\n            api.dislike(card._id).then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            });\n        } else {\n            api.like(card._id).then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            });\n        }\n    }\n\n    const handleUpdateUser = (data) => {\n        return api.setUserInfoApi(data)\n            .then(res => {\n                setCurrentUser(res);\n                closeAllPopups()\n                return res;\n            })\n            .catch((err) => console.log(err))\n    }\n\n    const handleUpdateAvatar = (data) => {\n        return api.updateAvatar(data)\n            .then(res => {\n                setCurrentUser(res);\n                closeAllPopups()\n                return res;\n            })\n            .catch((err) => console.log(err))\n    }\n\n    const handleAddPlaceSubmit = ({name, link}) => {\n        return api.addCard({name, link})\n            .then(res => {\n                setCards([res, ...cards]);\n                closeAllPopups()\n                return res;\n            })\n            .catch((err) => console.log(err))\n    }\n\n    const handleCardDelete = (useCardId) => {\n        return api.deleteCard(useCardId)\n            .then(res => {\n                setCards(state => state.filter(item => item._id === useCardId ? null : item));\n                return res;\n            })\n            .catch((err) => console.log(err))\n    }\n\n    const handleRegister = ({password, email}) => {\n        return auth.register({password, email})\n            .then(res => {\n                if (!res || res.statusCode === 400) throw new Error(`Ошибка: ${res.message}`);\n                setIsInfoTooltipPopupOpen(true);\n                setIsSuccess(true);\n                history.push('/sign-in')\n                return res;\n            })\n            .catch(err => {\n                setIsInfoTooltipPopupOpen(true);\n                setIsSuccess(false);\n                return err;\n            })\n    }\n\n    const tokenCheck = useCallback(() => {\n        const jwt = localStorage.getItem('jwt');\n\n        if (jwt) {\n            setIsAuthChecking(true);\n            auth.getContent(jwt)\n                .then((res) => {\n                    if (res) {\n                        setLoggedIn(true);\n                        setData({\n                            email: res.data.email\n                        })\n                        history.push('/mesto');\n                    }\n                })\n                .catch(() => history.push('/sign-in'))\n                .finally(() => setIsAuthChecking(false))\n        } else {\n            setIsAuthChecking(false)\n        }\n    }, [history])\n\n    useEffect(() => {\n        tokenCheck();\n    }, [tokenCheck])\n\n    const handleLogin = ({password, email}) => {\n        return auth.authorize({password, email})\n            .then(res => {\n                if (!res || res.statusCode === 400 || res.statusCode === 401) throw new Error(`Ошибка: ${res.message}`);\n                if (res.token) {\n                    setIsInfoTooltipPopupOpen(true);\n                    setIsSuccess(true);\n                    setLoggedIn(true);\n                    localStorage.setItem('jwt', res.token);\n                }\n            })\n            .then(tokenCheck)\n            .catch(err => {\n                setIsInfoTooltipPopupOpen(true);\n                setIsSuccess(false);\n                return err;\n            })\n    }\n\n    const handleSignOut = () => {\n        localStorage.removeItem('jwt');\n        setData(initialData);\n        setLoggedIn(false);\n        history.push('/sign-in');\n    }\n\n    return (\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header\n                    loggedIn={loggedIn}\n                    onSignOut={handleSignOut}\n                    userEmail={data.email}\n                />\n                <Switch>\n                    <ProtectedRoute\n                        path=\"/mesto\"\n                        loggedIn={loggedIn}\n                        isChecking={isAuthChecking}\n                        exact>\n                        <Main\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            cards={cards}\n                            onCardDelete={handleCardDelete}\n                            onCardLike={handleCardLike}/>\n                        />\n                    </ProtectedRoute>\n\n                    <Route path='/sign-up' exact>\n                        <Register onRegister={handleRegister}/>\n                    </Route>\n\n                    <Route path='/sign-in' exact>\n                        <Login onLogin={handleLogin}/>\n                    </Route>\n\n                    <Route path=\"*\">\n                        {loggedIn\n                            ? <Redirect to=\"/mesto\"/>\n                            : <Redirect to=\"/sign-in\"/>}\n                    </Route>\n                </Switch>\n                <Footer/>\n\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups}\n                                  onUpdateUser={handleUpdateUser}/>\n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n                <PopupWithForm name='delete' title='Вы уверены?' popupClass='popup-delete__card'\n                               buttonCloseClass='close-delete'\n                               buttonSubmitClass='popup-delete__button' buttonSubmitText='Да' isOpen={false}>\n                </PopupWithForm>\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups}\n                                 onUpdateAvatar={handleUpdateAvatar}/>\n                <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n\n                <InfoTooltip\n                    isOpen={isInfoTooltipPopupOpen}\n                    onClose={closePopup}\n                    isSuccess={isSuccess}\n                />\n\n            </CurrentUserContext.Provider>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}